---
title: "Appending Gene Symbols and Protein Descriptions with blastx"
output: html_document
date: "2025-03-26"
---

# Add Gene Symbols to by accession numbers

```{r}
# Load the necessary libraries
library(httr)
library(xml2)

# Load the CSV file containing your data
df <- read.csv("../data/noname.csv")

# Function to fetch gene symbol using UniProt
get_gene_symbol <- function(accession) {
  # Query UniProt for the given accession number
  url <- paste0("https://www.uniprot.org/uniprot/", accession, ".xml")
  response <- GET(url)
  
  # If the response is successful
  if (status_code(response) == 200) {
    xml <- content(response, "text")
    # Parse the XML to extract the gene symbol
    gene_symbol <- xml_text(xml_find_first(read_xml(xml), ".//gene"))
    return(gene_symbol)
  }
  return(NA)  # Return NA if not found
}

# Apply the function to the 'Acc. Len' column (adjust the column name if necessary)
df$Gene.Symbol <- sapply(df$accession, get_gene_symbol)

# Save the annotated CSV with gene symbols
write.csv(df, "annotated_noname.csv", row.names = FALSE)

print("Gene symbols annotation complete.")

```